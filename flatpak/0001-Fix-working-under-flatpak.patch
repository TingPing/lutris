From 4e0475a19a562bc01cd9de82ed2cab54dfa67d3c Mon Sep 17 00:00:00 2001
From: Patrick Griffis <tingping@tingping.se>
Date: Tue, 27 Dec 2016 18:11:09 -0500
Subject: [PATCH] Fix working under flatpak

---
 lutris/util/datapath.py | 17 +----------------
 setup.py                |  1 +
 2 files changed, 2 insertions(+), 16 deletions(-)

diff --git a/lutris/util/datapath.py b/lutris/util/datapath.py
index 176161ed..0c27ae3a 100644
--- a/lutris/util/datapath.py
+++ b/lutris/util/datapath.py
@@ -5,22 +5,7 @@ from lutris import settings
 
 def get():
     """Return the path for the resources."""
-    launch_path = os.path.realpath(sys.path[0])
-    if launch_path.startswith("/usr/local"):
-        data_path = '/usr/local/share/lutris'
-    elif launch_path.startswith("/usr"):
-        data_path = '/usr/share/lutris'
-    elif os.path.exists(os.path.normpath(os.path.join(sys.path[0], 'share'))):
-        data_path = os.path.normpath(os.path.join(sys.path[0], 'share/lutris'))
-    else:
-        import lutris
-        lutris_module = lutris.__file__
-        data_path = os.path.join(
-            os.path.dirname(os.path.dirname(lutris_module)), 'share/lutris'
-        )
-    if not os.path.exists(data_path):
-        raise IOError("data_path can't be found at : %s" % data_path)
-    return data_path
+    return '/app/share/lutris'
 
 
 def get_banner_path(slug):
diff --git a/setup.py b/setup.py
index b3ff5a84..46375e08 100755
--- a/setup.py
+++ b/setup.py
@@ -35,6 +35,7 @@ setup(
         'pyinotify',
         'evdev'
     ],
+    zip_safe=False,
     url='https://lutris.net',
     description='Install and play any video game on Linux',
     long_description="""Lutris is a gaming platform for GNU/Linux. It's goal is
-- 
2.11.0

